<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>KallistiOS: Querying Inputs</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">KallistiOS<span id="projectnumber">&#160;##version##</span>
   </div>
   <div id="projectbrief">Independent SDK for the Sega Dreamcast</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('group__controller__inputs.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">Modules</a> &#124;
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">Querying Inputs<div class="ingroups"><a class="el" href="group__peripherals.html">Peripherals</a> &raquo; <a class="el" href="group__controller.html">Controller</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>API used to query for input state.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="groups" name="groups"></a>
Modules</h2></td></tr>
<tr class="memitem:group__controller__input__masks" id="r_group__controller__input__masks"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__controller__input__masks.html">Inputs</a></td></tr>
<tr class="memdesc:group__controller__input__masks"><td class="mdescLeft">&#160;</td><td class="mdescRight">Collection of all status masks for checking input. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcont__state__t.html">cont_state_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Controller state structure.  <a href="structcont__state__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga5dc5d943a40b6b5f2076a6f634eb03df" id="r_ga5dc5d943a40b6b5f2076a6f634eb03df"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__controller__inputs.html#ga5dc5d943a40b6b5f2076a6f634eb03df">CONT_RESET_BUTTONS</a>&#160;&#160;&#160;(<a class="el" href="group__controller__input__masks.html#ga3eb754a26060fabf3ee8fee392e080e0">CONT_A</a> | <a class="el" href="group__controller__input__masks.html#ga978d30cff82b461be34708c334d90639">CONT_B</a> | <a class="el" href="group__controller__input__masks.html#ga19e80b7f591e338ec135c5fa10fea2e4">CONT_X</a> | <a class="el" href="group__controller__input__masks.html#ga49399495074acb416d9217635829f40d">CONT_Y</a> | <a class="el" href="group__controller__input__masks.html#gab6a8bb8227d3e148481e6a7578b7061f">CONT_START</a>)</td></tr>
<tr class="memdesc:ga5dc5d943a40b6b5f2076a6f634eb03df"><td class="mdescLeft">&#160;</td><td class="mdescRight">Controller buttons for standard reset action.  <br /></td></tr>
<tr class="separator:ga5dc5d943a40b6b5f2076a6f634eb03df"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:gabed41895f47836983b7fa1de6170c9e0" id="r_gabed41895f47836983b7fa1de6170c9e0"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__controller__inputs.html#gabed41895f47836983b7fa1de6170c9e0">cont_btn_callback_t</a>) (uint8_t addr, uint32_t btns)</td></tr>
<tr class="memdesc:gabed41895f47836983b7fa1de6170c9e0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Controller automatic callback type.  <br /></td></tr>
<tr class="separator:gabed41895f47836983b7fa1de6170c9e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gae40b8916be4d95f0b5ee474b60426107" id="r_gae40b8916be4d95f0b5ee474b60426107"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__controller__inputs.html#gae40b8916be4d95f0b5ee474b60426107">cont_btn_callback</a> (uint8_t addr, uint32_t btns, <a class="el" href="group__controller__inputs.html#gabed41895f47836983b7fa1de6170c9e0">cont_btn_callback_t</a> cb)</td></tr>
<tr class="memdesc:gae40b8916be4d95f0b5ee474b60426107"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set an automatic button press callback.  <br /></td></tr>
<tr class="separator:gae40b8916be4d95f0b5ee474b60426107"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>API used to query for input state. </p>
<p>The following API is used to check for a controller's input state.</p>
<p>You can grab a controller's state structure, containing the state of all of its inputs by using: </p><pre class="fragment">cont_state_t *state = (cont_state_t *)maple_dev_status(device);
</pre><p> Next you can check for the state of a particular button with: </p><pre class="fragment">if(state-&gt;a)                // Check via bitfield
    printf("Pressed A".);
</pre><p> or </p><pre class="fragment">if(state-&gt;buttons &amp; CONT_A) // Check via applying bitmask
    printf("Pressed A.")
</pre> <h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ga5dc5d943a40b6b5f2076a6f634eb03df" name="ga5dc5d943a40b6b5f2076a6f634eb03df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5dc5d943a40b6b5f2076a6f634eb03df">&#9670;&#160;</a></span>CONT_RESET_BUTTONS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CONT_RESET_BUTTONS&#160;&#160;&#160;(<a class="el" href="group__controller__input__masks.html#ga3eb754a26060fabf3ee8fee392e080e0">CONT_A</a> | <a class="el" href="group__controller__input__masks.html#ga978d30cff82b461be34708c334d90639">CONT_B</a> | <a class="el" href="group__controller__input__masks.html#ga19e80b7f591e338ec135c5fa10fea2e4">CONT_X</a> | <a class="el" href="group__controller__input__masks.html#ga49399495074acb416d9217635829f40d">CONT_Y</a> | <a class="el" href="group__controller__input__masks.html#gab6a8bb8227d3e148481e6a7578b7061f">CONT_START</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Controller buttons for standard reset action. </p>
<p>Convenience macro providing the standard button combination used as a reset mechanism by most retail games. </p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="gabed41895f47836983b7fa1de6170c9e0" name="gabed41895f47836983b7fa1de6170c9e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabed41895f47836983b7fa1de6170c9e0">&#9670;&#160;</a></span>cont_btn_callback_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* cont_btn_callback_t) (uint8_t addr, uint32_t btns)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Controller automatic callback type. </p>
<p>Functions of this type can be set with <a class="el" href="group__controller__inputs.html#gae40b8916be4d95f0b5ee474b60426107" title="Set an automatic button press callback.">cont_btn_callback()</a> to respond automatically to the specified set of buttons being pressed. This can be used, for instance, to implement the standard A+B+X+Y+Start method of ending the program running.</p>
<dl class="section warning"><dt>Warning</dt><dd>Your callback will be invoked within a context with interrupts disabled. See cont_btn_callback for more information.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">addr</td><td>Maple BUS address to poll for the button mask on, or 0 for all ports. </td></tr>
    <tr><td class="paramname">btns</td><td>Mask of all buttons which should be pressed to trigger the callback.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__controller__inputs.html#gae40b8916be4d95f0b5ee474b60426107" title="Set an automatic button press callback.">cont_btn_callback</a> </dd></dl>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="gae40b8916be4d95f0b5ee474b60426107" name="gae40b8916be4d95f0b5ee474b60426107"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae40b8916be4d95f0b5ee474b60426107">&#9670;&#160;</a></span>cont_btn_callback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cont_btn_callback </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>btns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__controller__inputs.html#gabed41895f47836983b7fa1de6170c9e0">cont_btn_callback_t</a>&#160;</td>
          <td class="paramname"><em>cb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set an automatic button press callback. </p>
<p>This function sets a callback function to be called when the specified controller has the set of buttons given pressed.</p>
<dl class="section note"><dt>Note</dt><dd>The callback gets invoked for the given maple port; however, providing an address of '0' will cause it to be invoked for any port with a device pressing the given buttons. Since you are passed back the address of this device, You are free to implement your own filtering logic within your callback.</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>The provided callback function is invoked within a context which has interrupts disabled. This means that you should not do any sort of complex processing or make any API calls which depend on interrupts to complete, such as Maple or ethernet processing whichy rely on packet transmission, any sleeping or threading calls, blocking on any sort of file I/O, etc. This mechanism is typically used to quickly terminate the application and should be used with caution.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">addr</td><td>The controller to listen on (or 0 for all ports). This value can be obtained by using <a class="el" href="group__maple.html#gaeeb347cfff439c4b67d6c9ac1b1f17d4" title="Return a &quot;maple address&quot; for a port, unit pair.">maple_addr()</a>. </td></tr>
    <tr><td class="paramname">btns</td><td>The buttons bitmask to match. </td></tr>
    <tr><td class="paramname">cb</td><td>The callback to call when the buttons are pressed. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
