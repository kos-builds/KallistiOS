<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>KallistiOS: Real-Time Clock</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">KallistiOS<span id="projectnumber">&#160;##version##</span>
   </div>
   <div id="projectbrief">Independent SDK for the Sega Dreamcast</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('group__rtc.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#files">Files</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">Real-Time Clock<div class="ingroups"><a class="el" href="group__timing.html">Timing</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Real-Time Clock (RTC) Management.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="files" name="files"></a>
Files</h2></td></tr>
<tr class="memitem:rtc_8h" id="r_rtc_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rtc_8h.html">rtc.h</a></td></tr>
<tr class="memdesc:rtc_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Low-level real-time clock functionality. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga08e5ccb1801a13800a1f242a1d898ea4" id="r_ga08e5ccb1801a13800a1f242a1d898ea4"><td class="memItemLeft" align="right" valign="top">time_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rtc.html#ga08e5ccb1801a13800a1f242a1d898ea4">rtc_unix_secs</a> (void)</td></tr>
<tr class="memdesc:ga08e5ccb1801a13800a1f242a1d898ea4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the current date/time.  <br /></td></tr>
<tr class="separator:ga08e5ccb1801a13800a1f242a1d898ea4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacaea4e6e624ed28872cf9157cc330c06" id="r_gacaea4e6e624ed28872cf9157cc330c06"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rtc.html#gacaea4e6e624ed28872cf9157cc330c06">rtc_set_unix_secs</a> (time_t time)</td></tr>
<tr class="memdesc:gacaea4e6e624ed28872cf9157cc330c06"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the current date/time.  <br /></td></tr>
<tr class="separator:gacaea4e6e624ed28872cf9157cc330c06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0d91e1401bf7d4b8e7fdf381755234a9" id="r_ga0d91e1401bf7d4b8e7fdf381755234a9"><td class="memItemLeft" align="right" valign="top">time_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rtc.html#ga0d91e1401bf7d4b8e7fdf381755234a9">rtc_boot_time</a> (void)</td></tr>
<tr class="memdesc:ga0d91e1401bf7d4b8e7fdf381755234a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the time since the system was booted.  <br /></td></tr>
<tr class="separator:ga0d91e1401bf7d4b8e7fdf381755234a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Real-Time Clock (RTC) Management. </p>
<p>Provides an API for fetching and managing the date/time using the Dreamcast's real-time clock. All timestamps are in standard Unix format, with an epoch of January 1, 1970. Due to the fact that there is no time zone data on the RTC, all times are expected to be in the local time zone.</p>
<dl class="section note"><dt>Note</dt><dd>The RTC that is used by the DC is located on the AICA rather than SH4, presumably for power-efficiency reasons. Because of this, accessing it requires a trip over the G2 BUS, which is notoriously slow.</dd>
<dd>
For reading the current date/time, you should favor the standard C, C++, or POSIX functions, as they are platform-indpendent and are calculating current time based on a cached boot time plus a delta that is maintained by the timer subsystem, rather than actually having to requery the RTC over the G2 BUS, so they are faster.</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Internally, the RTC's date/time is maintained using a 32-bit counter with an epoch of January 1, 1950 00:00. Because of this, the Dreamcast's Y2K and the last timestamp it can represent before rolling over is February 06 2086 06:28:15.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__wdt.html" title="Driver for using the WDT as a reset or interval timer.">Watchdog Timer</a>, <a class="el" href="group__timers.html" title="SH4 CPU peripheral providing timers and counters.">Timer Unit</a>, <a class="el" href="group__perf__counters.html" title="SH4 CPU Performance Counter Driver.">Performance Counters</a> </dd></dl>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga0d91e1401bf7d4b8e7fdf381755234a9" name="ga0d91e1401bf7d4b8e7fdf381755234a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0d91e1401bf7d4b8e7fdf381755234a9">&#9670;&#160;</a></span>rtc_boot_time()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">time_t rtc_boot_time </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the time since the system was booted. </p>
<p>This function retrieves the cached RTC value from when KallistiOS was started. As with <a class="el" href="group__rtc.html#ga08e5ccb1801a13800a1f242a1d898ea4" title="Get the current date/time.">rtc_unix_secs()</a>, this is a UNIX-style timestamp in local time.</p>
<dl class="section return"><dt>Returns</dt><dd>The boot time as a UNIX-style timestamp. </dd></dl>

</div>
</div>
<a id="gacaea4e6e624ed28872cf9157cc330c06" name="gacaea4e6e624ed28872cf9157cc330c06"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gacaea4e6e624ed28872cf9157cc330c06">&#9670;&#160;</a></span>rtc_set_unix_secs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rtc_set_unix_secs </td>
          <td>(</td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>time</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the current date/time. </p>
<p>This function sets the current RTC value as a standard UNIX timestamp (with an epoch of January 1, 1970 00:00). This is assumed to be in the timezone of the user (as the RTC does not support timezones).</p>
<dl class="section warning"><dt>Warning</dt><dd>This function may fail! Since <code>time_t</code> is typically 64-bit while the RTC uses a 32-bit timestamp (which also has a different epoch), not all <code>time_t</code> values can be represented within the RTC!</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">time</td><td>Unix timestamp to set the current time to</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 for success or -1 for failure (with errno set appropriately).</dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">EINVAL</td><td><code>time</code> was an invalid timestamp or could not be represented on the AICA's RTC. </td></tr>
    <tr><td class="paramname">EPERM</td><td>Failed to set and successfully read back <code>time</code> from the RTC.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__rtc.html#ga08e5ccb1801a13800a1f242a1d898ea4" title="Get the current date/time.">rtc_unix_secs()</a> </dd></dl>

</div>
</div>
<a id="ga08e5ccb1801a13800a1f242a1d898ea4" name="ga08e5ccb1801a13800a1f242a1d898ea4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga08e5ccb1801a13800a1f242a1d898ea4">&#9670;&#160;</a></span>rtc_unix_secs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">time_t rtc_unix_secs </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the current date/time. </p>
<p>This function retrieves the current RTC value as a standard UNIX timestamp (with an epoch of January 1, 1970 00:00). This is assumed to be in the timezone of the user (as the RTC does not support timezones).</p>
<dl class="section return"><dt>Returns</dt><dd>The current UNIX-style timestamp (local time).</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__rtc.html#gacaea4e6e624ed28872cf9157cc330c06" title="Set the current date/time.">rtc_set_unix_secs()</a> </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
